<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />        
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"/>
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.4.5.min.css">
        <script type="text/javascript" src="js/jquery-2.1.3.min.js"></script>
		<script type="text/javascript" src="js/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>        
        <title>Weather</title>
        <style>
            .image {
                display: block;
                width: 100%;
            }
            .label {
                background-color: gold !important;
                font-size: 1.3em;
                font-family: Arial Black;
                text-decoration: underline !important;
            }
            #weatherResult {
                padding: 1em;
                background-color: #ECECEC;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                display: none; /*Will display only when there is output*/
            }

            .resultOutput {
                background-color: gold !important;
                font-size: 1.3em;
                font-family: Arial Black;
                text-decoration: underline !important;
            }
            .submitButton {
                background-color: lightskyblue !important;
            }
        </style>
        <script>
            function weatherReport() { // triggered with 'Get Weather Report' button
                //Get user entered city
                var citySearch = document.getElementById("cityInput").value;
                    //DEBUG
                    //alert("citySearch: " + citySearch);
                    
                //Get user chosen country REF: http://www.trottyzone.com/using-javascript-get-value-input-select/
                var countrySelectInput = document.getElementById("countryInput");
                var countryChosen = countrySelectInput.value;
                    //DEBUG
                    //alert("countryChosen: " + countryChosen);    

                //Get weather JSON and parse the weather report information
                //Ref: http://www.jquerybyexample.net/2012/05/how-to-read-and-parse-json-using-jquery.html
                 var weatherJSON = "http://api.openweathermap.org/data/2.5/weather?q=" + citySearch + "," + countryChosen;
                
                     //START - JSON TEXT EXAMPLE
                     //{  
                     //    "coord":{  
                     //        "lon":-88.99,
                     //        "lat":40.51
                     //    },
                     //    "sys":{  
                     //        "type":1,
                     //        "id":953,
                     //        "message":0.0109,
                     //        "country":"US",
                     //        "sunrise":1426680102,
                     //        "sunset":1426723565
                     //    },
                     //    "weather":[  
                     //        {  
                     //            "id":800,
                     //            "main":"Clear",
                     //            "description":"sky is clear",
                     //            "icon":"01d"
                     //        }
                     //    ],
                     //    "base":"cmc stations",
                     //    "main":{  
                     //        "temp":280.35,
                     //        "pressure":1026,
                     //        "humidity":33,
                     //        "temp_min":279.82,
                     //        "temp_max":281.15
                     //    },
                     //    "wind":{  
                     //        "speed":5.1,
                     //        "deg":100
                     //    },
                     //    "clouds":{  
                     //        "all":1
                     //    },
                     //    "dt":1426703094,
                     //    "id":4903780,
                     //    "name":"Normal",
                     //    "cod":200
                     //}
                     //END - JSON TEXT EXAMPLE
                
                     //DEBUG
				     //$.getJSON("https://graph.facebook.com/btaylor", function(person){
                     //    $.each(person, function(key, value){
				     //    	alert("facebook: "+key+": "+value)
				     //    });
				     //});

                    //alert("weatherJSON: " + weatherJSON);

                $.getJSON(weatherJSON, function (data) {
                    //DEBUG
                    //alert("dataJSON data.coord.lon: " + data.coord.lon);
                    //alert("temp : " + data.main.temp);

                    //Get temperature and convert from Kelvin to Celcius
                    var tempKelvinString = data.main.temp;
                    var tempKelvinInt = parseInt(tempKelvinString);
                    var tempCelciusInt = tempKelvinInt - 275.15;

                    //Get icon code and get the url
                    var iconURLCode = data.weather.icon;
                    var iconURL = "http://openweathermap.org/img/w/" + iconURLCode + ".png";

                    //Get longitude and latitude
                    var long = data.coord.lon;
                    var lat = data.coord.lat;

                    //http://openweathermap.org/forecast
                    //http://api.openweathermap.org/data/2.5/forecast/daily?lat=35&lon=139&cnt=5&mode=json
                });

                
                //alert("EXIT SCRIPT");
                $("#weatherResult").fadeIn(900);
            }
        </script>
        
    </head>
    <body>
        <div id="home" data-role="page"><!-- start home page -->
            <div data-role="header" data-position="fixed"><!-- start header -->
                <img class="image" src="img/backgrdImage.png"/>
            </div><!-- end header -->

            <br/><br/>

	        <div data-role="content"><!-- start content -->
	            <p class="ui-btn ui-shadow ui-corner-all label">Choose below</p>
	        </div><!-- end content -->
	        
	        <div data-role="footer" data-position="fixed" data-theme="b"><!-- start footer -->
	            <div data-role="navbar">
	                <ul>
	                    <li><a href="#home">Home</a>
	                    <li><a href="#locationEntry">Location</a></li>
	                    <li><a href="#">GPS</a></li>
	                </ul>
	            </div><!-- end navbar -->
	        </div><!-- end footer -->
        </div><!-- end home page -->

        <div id="locationEntry" data-role="page"><!-- start locationEntry page -->
            <div data-role="header" data-position="fixed"><!-- start header -->
                <img class="image" src="img/headerImage.png"/>
            </div><!-- end header -->

            <div data-role="content"><!-- start content -->
                <p class="ui-btn ui-shadow ui-corner-all label">LOCATION</p>
                <br/>
                <label for="cityInput">City:</label>
                <input type="text" name="cityInput" id="cityInput" value="normal"/>
                <label>Remove Normal from INPUT</label>
                <label for="countryInput">Country:</label>
                <select name="countryInput" id="countryInput" data-native-menu="false">
                    <option selected="selected" value="US">USA</option>
                    <option value="MY">Malaysia</option>
                    <option value="CA">Canada</option>
                    <option value="GB">UK</option>
                    <option value="DE">Germany</option>
                    <option value="FR">France</option>
                    <option value="RU">Russia</option>
                    <option value="SG">Singapore</option>
                    <option value="IN">India</option>
                    <option value="CN">China</option>
                    <option value="JP">Japan</option>
                    <option value="IT">Italy</option>
                </select>
                <br/>
                <a href="javascript:weatherReport()" class="ui-btn ui-shadow ui-corner-all ui-btn-icon-top ui-icon-cloud submitButton">Get Weather Report</a><!-- submit Button -->
                
                <br/>
                <hr/>
                <br/>
                
                <div id="weatherResult"><!-- start weatherResult -->
                    <p class="ui-btn ui-shadow ui-corner-all resultOutput">WEATHER REPORT</p>
                    <div id="weatherResultTable"><!-- start weatherResultTable -->



                    </div><!-- end weatherResultTable -->
                </div><!-- end weatherResult -->
                
                


            </div><!-- end content -->

            <div data-role="footer" data-position="fixed" data-theme="b"><!-- start footer -->
	            <div data-role="navbar">
	                <ul>
	                    <li><a href="#home">Home</a>
	                    <li><a href="#locationEntry">Location</a></li>
	                    <li><a href="#">GPS</a></li>
	                </ul>
	            </div><!-- end navbar -->
	        </div><!-- end footer -->
        </div><!-- end locationEntry page -->


    
    </body>
</html>